BÆ°á»›c 1: Danh sÃ¡ch cÃ¡c thÆ° viá»‡n cáº§n cÃ i Ä‘áº·t
Báº¡n hÃ£y táº¡o file requirements.txt vá»›i ná»™i dung sau Ä‘á»ƒ Replit hoáº·c Hosting tá»± Ä‘á»™ng cÃ i:

nginx
Sao chÃ©p
Chá»‰nh sá»­a
Flask
Flask_SQLAlchemy
âœ… BÆ°á»›c 2: Táº¡o cáº¥u trÃºc thÆ° má»¥c nhÆ° sau
arduino
Sao chÃ©p
Chá»‰nh sá»­a
/affiliate_app/
â”œâ”€â”€ app.py
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ register.html
â”œâ”€â”€ requirements.txt
âœ… BÆ°á»›c 3: Code Ä‘áº§y Ä‘á»§ cho pháº§n Ä‘Äƒng kÃ½ vÃ  táº¡o vÃ­ tá»± Ä‘á»™ng
ğŸ“ app.py
python
Sao chÃ©p
Chá»‰nh sá»­a
from flask import Flask, render_template, request, redirect, url_for
from flask_sqlalchemy import SQLAlchemy
from datetime import datetime

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///affiliate.db'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
db = SQLAlchemy(app)

# ======================= Models ============================
class Member(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    full_name = db.Column(db.String(100), nullable=False)
    phone = db.Column(db.String(20), nullable=False, unique=True)
    email = db.Column(db.String(100), nullable=False, unique=True)
    password = db.Column(db.String(200), nullable=False)
    role = db.Column(db.String(20), nullable=False)  # 'giaovien' | 'phuhuynh'
    industry = db.Column(db.String(100))
    address = db.Column(db.String(200))
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    wallet = db.relationship('Wallet', backref='member', uselist=False)

class Wallet(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    member_id = db.Column(db.Integer, db.ForeignKey('member.id'), nullable=False)
    balance = db.Column(db.Integer, default=0)  # tiá»n hoáº·c Ä‘iá»ƒm
    history = db.Column(db.Text, default='')

# ======================= Routes ============================
@app.route('/')
def home():
    return redirect(url_for('register'))

@app.route('/register', methods=['GET', 'POST'])
def register():
    if request.method == 'POST':
        data = request.form
        new_member = Member(
            full_name=data['full_name'],
            phone=data['phone'],
            email=data['email'],
            password=data['password'],
            role=data['role'],
            industry=data.get('industry', ''),
            address=data.get('address', '')
        )
        db.session.add(new_member)
        db.session.commit()

        # Táº¡o vÃ­ tá»± Ä‘á»™ng
        wallet = Wallet(member_id=new_member.id)
        db.session.add(wallet)
        db.session.commit()

        return redirect(url_for('success', member_id=new_member.id))
    return render_template('register.html')

@app.route('/success/<int:member_id>')
def success(member_id):
    member = Member.query.get(member_id)
    return f"ğŸ‰ ÄÄƒng kÃ½ thÃ nh cÃ´ng cho {member.full_name}! VÃ­ Ä‘Ã£ Ä‘Æ°á»£c táº¡o vá»›i sá»‘ dÆ°: 0"

# ======================= Khá»Ÿi táº¡o ============================
if __name__ == '__main__':
    with app.app_context():
        db.create_all()
    app.run(debug=True)
ğŸ“„ templates/register.html (Giao diá»‡n Ä‘áº¹p, cÃ³ hiá»‡n/áº©n máº­t kháº©u)
html
Sao chÃ©p
Chá»‰nh sá»­a
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>ÄÄƒng kÃ½ thÃ nh viÃªn</title>
</head>
<body>
  <h2>ÄÄƒng kÃ½ Affiliate</h2>
  <form method="POST">
    <input name="full_name" placeholder="Há» tÃªn" required><br>
    <input name="phone" placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i" required><br>
    <input name="email" placeholder="Email" required><br>
    <input type="password" name="password" id="password" placeholder="Máº­t kháº©u" required>
    <input type="checkbox" onclick="togglePassword()"> Hiá»‡n máº­t kháº©u<br>
    <select name="role" required>
      <option value="">-- Báº¡n lÃ  --</option>
      <option value="giaovien">GiÃ¡o viÃªn máº§m non</option>
      <option value="phuhuynh">Phá»¥ huynh Ä‘áº¡i sá»© thÆ°Æ¡ng hiá»‡u</option>
    </select><br>
    <input name="industry" placeholder="NgÃ nh nghá» (náº¿u cÃ³)"><br>
    <input name="address" placeholder="Äá»‹a chá»‰ (khÃ´ng báº¯t buá»™c)"><br>
    <button type="submit">ÄÄƒng kÃ½</button>
  </form>

  <script>
    function togglePassword() {
      var x = document.getElementById("password");
      x.type = x.type === "password" ? "text" : "password";
    }
  </script>
</body>
</html>
âœ… Káº¿t quáº£ sau khi cháº¡y:
NgÆ°á»i dÃ¹ng Ä‘Äƒng kÃ½ => há»‡ thá»‘ng táº¡o thÃ nh viÃªn & vÃ­ tá»± Ä‘á»™ng

Vai trÃ² Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh ngay tá»« Ä‘áº§u (giÃ¡o viÃªn / phá»¥ huynh)

Chuáº©n bá»‹ cho pháº§n tÃ­nh thÆ°á»Ÿng + sÆ¡ Ä‘á»“ cÃ¢y + vÃ­ Ä‘iá»‡n tá»­ + rÃºt tiá»n phÃ­a sau